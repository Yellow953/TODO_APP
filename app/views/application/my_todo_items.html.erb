<div class="m-4 p-4 card">
    <div class="card-header p-4 d-flex justify-content-between">
        <h2><%= @todo.name %></h2>
        <%= link_to "Back", my_todos_path, class:"btn btn-secondary m-1" %>
    </div>

    <%= form_with(model: @todo_item) do |form| %>
        <div class="row m-4">
            <div class="col-10">
                <%= form.text_field :name, class:"form-control" %>
                <%= form.hidden_field :todo_id, value: @todo.id %>
                <%= form.hidden_field :done, value: 0 %>
            </div>

            <div class="col-2">
                <%= form.submit class:"btn btn-primary" %>
            </div>
        </div>
    <% end %>

    <div id="my_todos_items">
        <% @todo.todo_items.each do |todo_item| %>
            <div class="card m-4 p-2">
                <div id="<%= dom_id todo_item %>" class="d-flex justify-content-between">
                    <div class="my-2">
                        <strong>Name:</strong>
                        <span><%= todo_item.name %></span>
                    </div>

                    <div class="d-flex">
                        <% if todo_item.done == 0 %>
                            <%= link_to "Mark", mark_todo_item_url(id: todo_item.id), class:"btn btn-success m-1" %>
                        <% else %>
                            <%= link_to "UnMark", unmark_todo_item_url(id: todo_item.id), class:"btn btn-danger m-1" %>
                        <% end %>
                        <%= link_to "Edit", edit_todo_item_path(todo_item), class:"btn btn-warning m-1" %>
                        <%= button_to "Delete", todo_item, method: :delete, data: { turbo_confirm: 'Are you sure?' }, class:"btn btn-danger m-1" %>
                    </div>
                </div>
            </div>
        <% end %>
    </div>
</div>